<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>abistudy_week02</title>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<body>
<div style = "border:2px solid black;margin-bottom:-2px ;width:100%;height:30px">
  首页
</div>
<div style="border:2px solid black;width:100%;height:500px" >
	<div style="margin-top:100px;margin-left:100px">
		<a href="javascript:document.getElementById('upload').click();">1：上传到VFS</a><br>
		<a href="javascript:importFromVfs();">2：从VFS导入</a><br>
		<a href="javascript:queryScore();">3：进入查询列表</a><br>
		<form id ="uploadForm" enctype="multipart/form-data">
			<input type="file" id="upload" name="file" style="visibility:hidden" >
		</form>
	</div>
</div>
</body>
<script type="text/javascript">
	//当上传文件的文本框发生变化时 发送请求进行文件上传vfs的操作
	$("#upload").change(function(){
		var formData = new FormData($("#uploadForm")[0]);
		$.ajax({
		 type:"POST",
		 url:"actionWeekTest02/uploadToVfs",
		 data:formData,
		 dataType:"json",
		 contentType:false,
		 processData:false,
		 success:function(response){
		 	location.href = "/abistudy/abistudy/result.html?message=" + response.message;
		 }
		})
	})
	//从vfs将文件中的数据导入到数据库中
	var importFromVfs = function(){
		$.post("actionWeekTest02/importToDb",function(response){
			location.href = "/abistudy/abistudy/result.html?message=" + response.message;
		})
	}
	//查询成绩 默认的dateIndex=0查询最后月份的数据
	var queryScore = function(){
		location.href="actionWeekTest02/queryScore?dateIndex="+0;
	}
</script>
</html>
